:root{
  --bg: #0f1e16;
  --panel: #15241e;
  --panel-2: #1a2d25;
  --ink: #e9f5ef;
  --muted: #a9c8ba;
  --accent: #14b893;
  --accent-2: #62d2b1;
  --danger: #ff6b6b;
  --border: #244437;
}
[data-theme="dark"]{
  --bg: #0f1e16;
  --panel: #15241e;
  --panel-2: #1a2d25;
  --ink: #e9f5ef;
  --muted: #a9c8ba;
  --accent: #14b893;
  --accent-2: #62d2b1;
  --danger: #ff6b6b;
  --border: #244437;
}

@media (prefers-color-scheme: light){
  :root{
    --bg: #f6faf7;
    --panel: #ffffff;
    --panel-2: #ecf4ef;
    --ink: #0e1512;
    --muted: #4b6a5b;
    --accent: #0fa380;
    --accent-2: #0fb58a;
    --border: #d7e6df;
  }
}
[data-theme="light"]{
  --bg: #f6faf7;
  --panel: #ffffff;
  --panel-2: #ecf4ef;
  --ink: #0e1512;
  --muted: #4b6a5b;
  --accent: #0fa380;
  --accent-2: #0fb58a;
  --border: #d7e6df;
}

*{ box-sizing: border-box }
html,body{ height:100% }
body{
  margin:0; font: 16px/1.4 ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, Noto Sans, Apple Color Emoji, Segoe UI Emoji;
  color: var(--ink); background: var(--bg);
}
.h1, h1{ font-size:1.4rem; font-weight:700; letter-spacing:.2px }
.h2, h2{ font-size:1.15rem; font-weight:650 }
.h3, h3{ font-size:1.05rem; font-weight:600 }

.app-header{
  display:flex; align-items:center; justify-content:space-between; gap:1rem;
  padding: 16px; border-bottom:1px solid var(--border); position:sticky; top:0; backdrop-filter:saturate(1.2) blur(6px);
  background: color-mix(in oklab, var(--bg) 88%, transparent);
}
.app-header h1{ margin:0; font-size:1.2rem; letter-spacing:.5px }
.top-actions{ display:flex; gap:.5rem; align-items:center }

.btn{
  appearance:none; border:1px solid var(--border); background: var(--panel-2); color:var(--ink);
  padding:.5rem .75rem; border-radius:10px; cursor:pointer; transition: all .15s ease; font-weight:600
}
.btn:hover{ transform: translateY(-1px) }
.btn.primary{ border-color: color-mix(in oklab, var(--accent) 40%, var(--border)); background: var(--accent); color:#08261d }
.btn:active{ transform: translateY(0) scale(.99) }

.import input + span{ display:inline-block }

.app-footer{ padding:12px 16px; border-top:1px solid var(--border); color:var(--muted); font-size:.9rem }

main{ padding: 16px; max-width: 900px; margin: 0 auto }
.view{ display:none }
.view.active{ display:block }
.science{ margin-bottom:12px }
.science-grid{ display:grid; grid-template-columns: repeat(4, 1fr); gap:.75rem; align-items:end }
.science .label{ color:var(--muted); font-size:.9rem; margin-bottom:4px }
.muted{ color: var(--muted) }
  .taxo-suggestions{ display:none; flex-direction:column; margin-top:.25rem; border:1px solid var(--border); background:var(--panel-2); border-radius:4px; max-height:12rem; overflow-y:auto; }
  .taxo-suggestions.show{ display:flex; }
  .taxo-suggestions .sugg{ cursor:pointer; padding:.25rem .5rem; }
  .taxo-suggestions .sugg.active{ background:var(--accent); color:#fff; }
.wx-pill{ border-color: color-mix(in oklab, var(--accent) 50%, var(--border)); background: var(--panel-2); color: var(--ink) }
.grid-3{ display:grid; grid-template-columns: repeat(3, 1fr); gap:.5rem }
.task-field{ display:grid; grid-template-columns: 1fr 120px; gap:.5rem }

.toolbar{ display:flex; align-items:baseline; gap:.75rem; margin: 8px 0 16px }
.toolbar h2{ margin:0 }
.hint{ color:var(--muted); font-size:.95rem }

.plant-list{ list-style:none; margin:0; padding:0; display:grid; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr)); gap:12px }
.cover{ background-size: cover; background-position:center }
.thumbs{ display:flex; gap:6px }
.thumbs img{ width:40px; height:40px; object-fit:cover; border-radius:8px; border:1px solid var(--border) }
.plant-card .header{ display:flex; align-items:center; justify-content:space-between; gap:.5rem }
.env-summary{ color: var(--muted); font-size:.9rem; margin-top:2px }
.detail .stats .pill{ margin-right:.25rem }
.btn.icon{ padding:.35rem .5rem }
.plant-card .name{ font-weight:700 }
.plant-card .species{ color:var(--muted) }
.plant-card .stats{ display:flex; gap:10px; color:var(--muted); font-size:.95rem }
.plant-card .due{ font-weight:600 }
.pill{ font-size:.8rem; padding:.15rem .5rem; border-radius: 999px; border:1px solid var(--border); background: var(--panel-2) }
.pill.overdue{ border-color: color-mix(in oklab, var(--danger) 50%, var(--border)); background: var(--panel-2); color:#ffd3d3 }
.pill.due{ border-color: color-mix(in oklab, #ffb400 50%, var(--border)); background: var(--panel-2); color:#fff1d6 }
.pill.soon{ border-color: color-mix(in oklab, var(--accent) 50%, var(--border)); background: var(--panel-2); color:#d6fff0 }
.pill.ok{ border-color: var(--border); opacity:.85 }
.pill.water{ border-color: color-mix(in oklab, var(--accent) 50%, var(--border)); background: var(--panel-2); }
.actions-row{ display:flex; gap:.5rem; margin-top:auto }
.btn.small{ padding:.35rem .6rem; font-size:.9rem }
.btn.ghost{ background: transparent }
.btn.danger{ border-color: color-mix(in oklab, var(--danger) 40%, var(--border)); color: #ff7d7d; background: transparent }

.card{
  background: var(--panel);
  border:1px solid color-mix(in oklab, var(--border) 75%, transparent);
  border-radius:16px; padding:16px; box-shadow: 0 1px 0 color-mix(in oklab, var(--bg) 94%, #000);
  transition: box-shadow .15s ease, transform .15s ease, border-color .2s ease;
}
.card:hover{ box-shadow: 0 6px 18px color-mix(in oklab, var(--bg) 80%, #000); transform: translateY(-1px) }
.row{ display:flex; flex-direction:column; gap:6px; margin: 10px 0 }
label{ color: var(--muted); font-size:.95rem }
input, select, textarea{
  appearance:none; border:1px solid var(--border); background: var(--panel-2); color:var(--ink);
  padding:.6rem .7rem; border-radius:10px; width:100%
}
.actions{ display:flex; gap:.5rem; justify-content:flex-end; margin-top:12px }

@media (max-width: 560px){
  .plant-list{ grid-template-columns: 1fr }
  .grid-3{ grid-template-columns: 1fr }
  .task-field{ grid-template-columns: 1fr 1fr }
  .science-grid{ grid-template-columns: 1fr 1fr }
}

.modal{ position: fixed; inset:0; display:none; align-items:center; justify-content:center; background: color-mix(in oklab, var(--bg) 40%, black 40% / 20%); padding:16px }
.modal.show{ display:flex }
.modal-content{ width:min(920px, 100%); max-height:80vh; overflow:auto }
.modal-header{ display:flex; align-items:center; justify-content:space-between; margin-bottom:8px }
.details-meta{ color:var(--muted); font-size:.95rem; margin-top:8px }
.obs-row{ display:grid; grid-template-columns: 1fr auto auto auto; gap:.5rem }
.obs-list{ display:grid; grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); gap:.5rem; margin-top:8px }
.obs-card{ background: var(--panel-2); border:1px solid var(--border); border-radius:10px; overflow:hidden }
.obs-card img{ display:block; width:100%; height:120px; object-fit:cover }
.obs-card .caption{ padding:6px 8px; font-size:.9rem; color:var(--muted) }
.task-list{ display:flex; flex-wrap: wrap; gap:.5rem; margin-top:6px }
#locationChips .chip{ border:1px solid var(--border); background: var(--panel-2); padding:.25rem .5rem; border-radius:999px; cursor:pointer }
#locationChips .chip.selected{ background: var(--accent); color: var(--panel); border-color: var(--accent) }
#locationChips input{ border:1px solid var(--border); background: var(--panel-2); padding:.25rem .5rem; border-radius:999px }
#soilChips .chip, #materialChips .chip{ border:1px solid var(--border); background: var(--panel-2); padding:.25rem .5rem; border-radius:999px; cursor:pointer }
#soilChips .chip.selected, #materialChips .chip.selected{ background: var(--accent); color: var(--panel); border-color: var(--accent) }
.task-chip{ display:flex; align-items:center; gap:.4rem; border:1px solid var(--border); background: var(--panel-2); padding:.25rem .5rem; border-radius:999px }
.task-chip button{ border:none; background:transparent; color:var(--accent-2); cursor:pointer }
.group-header{ list-style:none; margin: 8px 4px; color: var(--muted); font-weight:600 }

.toast{ position: fixed; bottom: 16px; left: 50%; transform: translateX(-50%); background: var(--panel); color: var(--ink); border:1px solid var(--border); padding:8px 12px; border-radius:12px; display:none; z-index: 9999 }

.step-progress{ margin-bottom:12px; height:8px; background: var(--panel-2); border:1px solid var(--border); border-radius:999px; overflow:hidden }
.step-progress .bar{ height:100%; width:20%; background: var(--accent); transition:width .2s ease }
